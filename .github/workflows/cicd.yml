name: implement a CICD workflow for a Java WebApp using GitHub Actions and Maven
on:
  push:
    branches:
      - main
  workflow_dispatch:
jobs:
 build:
  runs-on: ubuntu-latest
  steps:
  - name: checkout code
    uses: actions/checkout@v3
  - name: setup JDK 11
    uses: actions/setup-java@v2
    with:
      distribution: 'adopt'
      java-version: '11'
  - name: Build with Maven
    run: mvn install -f MyWebApp/pom.xml
  - name: Deploy to Tomcat
    run: |
     curl -v -u ${{ secrets.TOMCAT_USER }}:${{ secrets.TOMCAT_PASSWORD }} \
     -T MyWebApp/target/MyWebApp.war \
     "http://${{ secrets.TOMCAT_HOST }}/manager/text/deploy?path=/MyWebApp&update=true"
